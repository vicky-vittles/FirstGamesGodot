[gd_scene load_steps=8 format=2]

[ext_resource path="res://Entities/Ship/Player/States/PlayerHidden.tscn" type="PackedScene" id=1]
[ext_resource path="res://Entities/Ship/Player/States/PlayerDead.tscn" type="PackedScene" id=2]
[ext_resource path="res://Entities/Ship/Ship.tscn" type="PackedScene" id=3]
[ext_resource path="res://Entities/Ship/AI/States/AIFly.tscn" type="PackedScene" id=4]
[ext_resource path="res://Entities/Ship/Player/States/PlayerSpawn.tscn" type="PackedScene" id=5]
[ext_resource path="res://Entities/Ship/AI/Bot.gd" type="Script" id=6]

[sub_resource type="CircleShape2D" id=1]
radius = 100.0

[node name="Bot" instance=ExtResource( 3 )]
script = ExtResource( 6 )

[node name="StateMachine" parent="." index="0"]
actor_path = NodePath("..")

[node name="Spawn" parent="StateMachine" index="0" instance=ExtResource( 5 )]
fsm_path = NodePath("..")

[node name="Fly" parent="StateMachine" index="1" instance=ExtResource( 4 )]
fsm_path = NodePath("..")

[node name="Dead" parent="StateMachine" index="2" instance=ExtResource( 2 )]
fsm_path = NodePath("..")

[node name="Hidden" parent="StateMachine" index="3" instance=ExtResource( 1 )]
fsm_path = NodePath("..")

[node name="BulletDetector" type="Area2D" parent="." index="6"]
collision_layer = 2
collision_mask = 4
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="BulletDetector" index="0"]
visible = false
shape = SubResource( 1 )

[node name="FireRange" type="RayCast2D" parent="." index="7"]
enabled = true
cast_to = Vector2( 0, -2000 )
collision_mask = 2

[node name="FireDelay" type="Timer" parent="." index="8"]
wait_time = 0.1
one_shot = true
[connection signal="game_started" from="." to="StateMachine/Spawn" method="_on_Ship_game_started"]
[connection signal="game_won" from="." to="StateMachine/Fly" method="_on_Ship_game_won"]
[connection signal="area_entered" from="Hurtbox" to="StateMachine/Fly" method="_on_Hurtbox_area_entered"]
[connection signal="area_entered" from="BulletDetector" to="StateMachine/Fly" method="_on_BulletDetector_area_entered"]
[connection signal="timeout" from="FireDelay" to="." method="_on_FireDelay_timeout"]
[connection signal="died" from="Health" to="StateMachine/Fly" method="_on_Health_died"]
